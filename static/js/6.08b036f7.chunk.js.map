{"version":3,"sources":["pages/chat/ChatPage.module.css","pages/chat/ChatPage.tsx"],"names":["module","exports","Chat","dispatch","useDispatch","useEffect","startMessagesListening","stopMessagesListening","Messages","AddMessageForm","messages","useSelector","state","chat","className","s","messagesContainer","map","m","index","Message","key","message","style","margin","src","photo","width","alt","userName","useState","setMessage","textareaBlock","onChange","e","target","value","formButton","disabled","onClick","sendMessage","ChatPage"],"mappings":"yGACAA,EAAOC,QAAU,CAAC,kBAAoB,oCAAoC,cAAgB,gCAAgC,WAAa,+B,uGCejIC,EAAiB,WAEnB,IAAMC,EAAWC,cAUjB,OARAC,qBAAU,WAGN,OAFAF,EAASG,eAEF,WACHH,EAASI,kBAEd,IAGC,6BACI,kBAACC,EAAD,MACA,kBAACC,EAAD,QAKND,EAAqB,WACvB,IAAME,EAAWC,aAAY,SAACC,GAAD,OAAyBA,EAAMC,KAAKH,YAGjE,OACI,yBAAKI,UAAWC,IAAEC,mBACbN,EAASO,KAAI,SAACC,EAAGC,GAAJ,OAAc,kBAACC,EAAD,CAASC,IAAKF,EAAOG,QAASJ,SAQhEE,EAAkC,SAAC,GAAe,IAAdE,EAAa,EAAbA,QACtC,OACI,yBAAKC,MAAO,CAACC,OAAQ,QACjB,yBAAKC,IAAKH,EAAQI,MAAOC,MAAO,GAAIC,IAAI,WAAU,2BAAIN,EAAQO,UAC9D,6BACA,2BAAIP,EAAQA,SACZ,+BAMNb,EAA2B,WAAO,IAAD,EACLqB,mBAAS,IADJ,mBAC5BR,EAD4B,KACnBS,EADmB,OAEHD,mBAA8B,WAF3B,mBAG7B3B,GAH6B,UAGlBC,eAOjB,OACI,oCACI,yBAAKU,UAAWC,IAAEiB,eACd,8BAAUC,SAAU,SAACC,GAAD,OAAOH,EAAWG,EAAEC,OAAOC,QAAQA,MAAOd,KAElE,6BACI,4BAAQR,UAAWC,IAAEsB,WAAYC,UAAU,EACnCC,QAZO,WAClBjB,IACLnB,EAASqC,YAAYlB,IACrBS,EAAW,OAQH,WAQDU,UA9EY,WACvB,OACI,6BACI,kBAACvC,EAAD","file":"static/js/6.08b036f7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"messagesContainer\":\"ChatPage_messagesContainer__37pxo\",\"textareaBlock\":\"ChatPage_textareaBlock__3H6Va\",\"formButton\":\"ChatPage_formButton__g1AHW\"};","import React, {useEffect, useState} from \"react\";\nimport s from './ChatPage.module.css'\nimport {ChatMessageType} from \"../../api/chat-api\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {sendMessage, startMessagesListening, stopMessagesListening} from \"../../redux/chat-reducer\";\nimport {AppStateType} from \"../../redux/redux-store\";\n\n\nconst ChatPage: React.FC = () => {\n    return (\n        <div>\n            <Chat/>\n        </div>\n    )\n}\n\nconst Chat: React.FC = () => {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(startMessagesListening())\n\n        return () => {\n            dispatch(stopMessagesListening())\n        }\n    }, [])\n\n    return (\n        <div>\n            <Messages/>\n            <AddMessageForm/>\n        </div>\n    )\n}\n\nconst Messages: React.FC = () => {\n    const messages = useSelector((state: AppStateType) => state.chat.messages)\n\n\n    return (\n        <div className={s.messagesContainer}>\n            {messages.map((m, index) => <Message key={index} message={m}/>)}\n        </div>\n    )\n}\n\ntype MessageProps = {\n    message: ChatMessageType\n}\nconst Message: React.FC<MessageProps> = ({message}) => {\n    return (\n        <div style={{margin: '5px'}}>\n            <img src={message.photo} width={30} alt=\"avatar\"/><b>{message.userName}</b>\n            <hr/>\n            <p>{message.message}</p>\n            <hr/>\n        </div>\n    )\n}\n\n\nconst AddMessageForm: React.FC = () => {\n    const [message, setMessage] = useState('')\n    const [readyStatus, setReady] = useState<'pending' | 'ready'>('pending')\n    const dispatch = useDispatch()\n\n    const sendMessageHandler = () => {\n        if (!message) return\n        dispatch(sendMessage(message))\n        setMessage('')\n    }\n    return (\n        <>\n            <div className={s.textareaBlock}>\n                <textarea onChange={(e) => setMessage(e.target.value)} value={message}/>\n            </div>\n            <div>\n                <button className={s.formButton} disabled={false}\n                        onClick={sendMessageHandler}>Send\n                </button>\n            </div>\n        </>\n    )\n}\n\nexport default ChatPage\n"],"sourceRoot":""}